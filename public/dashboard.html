<p>Status da mineração: <span id="status">Carregando...</span></p>
<button id="startBtn">Iniciar Mineração</button>
<button id="stopBtn">Parar Mineração</button>

<script>
  const statusEl = document.getElementById("status");
  const startBtn = document.getElementById("startBtn");
  const stopBtn = document.getElementById("stopBtn");

  // Função para atualizar o status
  async function fetchStatus() {
    try {
      const res = await fetch("/api/mining/status");
      const data = await res.json();
      statusEl.textContent = data.status;
    } catch (err) {
      statusEl.textContent = "Erro ao carregar status";
      console.error(err);
    }
  }

  // Iniciar mineração
  startBtn.addEventListener("click", async () => {
    try {
      const res = await fetch("/api/mining/start", { method: "POST" });
      const data = await res.json();
      statusEl.textContent = data.status;
    } catch (err) {
      statusEl.textContent = "Erro ao iniciar";
      console.error(err);
    }
  });

  // Parar mineração
  stopBtn.addEventListener("click", async () => {
    try {
      const res = await fetch("/api/mining/stop", { method: "POST" });
      const data = await res.json();
      statusEl.textContent = data.status;
    } catch (err) {
      statusEl.textContent = "Erro ao parar";
      console.error(err);
    }
  });

  // Atualiza o status ao carregar a página
  fetchStatus();
</script>
