<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<title>Dashboard Mineração</title>
</head>
<body>
<h1>Dashboard do Usuário</h1>
<p>Status da mineração: <span id="status">Carregando...</span></p>
<button onclick="startMining()">Iniciar Mineração</button>
<button onclick="stopMining()">Parar Mineração</button>

<script>
async function updateStatus() {
  try {
    const res = await fetch("/api/mining/status");
    const data = await res.json();
    document.getElementById("status").innerText = data.status;
  } catch {
    document.getElementById("status").innerText = "Erro ao carregar status";
  }
}

async function startMining() {
  await fetch("/api/mining/start", { method: "POST" });
  updateStatus();
}

async function stopMining() {
  await fetch("/api/mining/stop", { method: "POST" });
  updateStatus();
}

// Atualiza status a cada 2s
setInterval(updateStatus, 2000);
updateStatus();
</script>
</body>
</html>
